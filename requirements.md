# insta-image-bot 要件定義（初版）

## 1. 背景・目的
- **顧客像**: Instagramの広告運用経験者。自身またはクライアントのアカウント運用を効率化したい。
- **課題**: 画像の準備・加工・投稿準備が手作業で非効率。投稿フォーマットの統一にも手間がかかる。
- **目的**: Google Driveに画像をアップロードするだけで、Instagram投稿に最適化された画像と投稿文を自動生成・準備できる仕組みを構築し、運用コストを削減する。

## 2. ステークホルダー
- **依頼主（顧客）**: Instagramビジネスアカウントを所有する広告担当者。
- **運用者**: システムの保守・設定変更を行う社内メンバー。
- **視聴者**: Instagramのフォロワー。統一感のある投稿を受け取る。
- **外部サービス提供者**: Meta (Instagram)、Google 等 API を提供する企業。

## 3. スコープ
- **対象範囲**: 画像アップロード → 自動加工 → 投稿文生成 → 投稿/下書き登録 → 通知・ログまで。
- **範囲外**: 画像の完全自動生成、コメント管理、詳細分析レポート、Instagram以外のチャネル対応。

## 4. 想定業務フロー
1. 顧客が Google Drive の指定フォルダへ画像をアップロード。
2. システムがアップロードを検知し、画像を Instagram 推奨仕様へリサイズ/トリミング。
3. 既定テンプレートおよび AI を用いてキャプション案とハッシュタグ候補を生成。
4. 生成結果を運用者・顧客が確認できる形で出力（Drive・Slack・メール等）。
5. 問題なければ Meta Graph API を通じて下書き登録または予約投稿を実行。
6. 成功/失敗をログ記録し、失敗時は通知を送信。必要に応じて再処理。

## 5. 機能要件（初版）
- **F1 画像トリガー**: Google Drive 指定フォルダへのファイル追加を検知し、処理を開始する。
- **F2 画像加工**: Instagram 推奨比率（例: 1080x1080, 1080x1350 等）へのリサイズ、必要に応じたトリミング・透かし・テンプレ適用。
- **F3 キャプション生成**: トンマナに沿ったテンプレート＋AI提案による文案、ハッシュタグ候補、CTA を生成。
- **F4 投稿連携**: Meta Graph API を介して下書き保存または予約投稿を行う。投稿タイミングは設定値またはメタデータに従う。
- **F5 通知・ログ**: 成功/失敗ログを記録し、失敗時は運用者へ通知（Slack/メールなど）。
- **F6 管理機能（将来拡張）**: テンプレート・トンマナ設定、ハッシュタグリスト等を管理・更新できる UI/設定ファイル。

## 6. 非機能要件（初版）
- **信頼性**: 通常運用で 90% 以上の処理成功率。失敗時のリトライや手動介入手順を用意。
- **セキュリティ**: API トークン、OAuth 認証情報を安全に保管し、最小権限で運用。DriveやInstagramへのアクセス権を厳格に管理。
- **操作性**: 顧客は画像アップロードのみで完結。必要に応じて結果を簡単に確認・修正できる導線を提供。
- **パフォーマンス**: 1 件あたりの処理時間は数分以内。ピーク時に日次数十件の処理を想定。
- **保守性**: 設定値・テンプレの更新手順を明文化し、コード変更なしで一部調整可能とする。
- **監査性**: 処理履歴を追跡できるようログを整備し、いつ・誰の投稿が処理されたか確認できる。

## 7. 制約・前提条件
- Instagram の自動投稿は Meta Graph API の仕様に従い、ビジネスアカウントと Facebook ページ連携が必須。
- Google Drive の権限設定やフォルダ構成は顧客が事前に整備済みであること。
- 外部サービス（Zapier/Make 等）の利用可否や予算は別途確認が必要。
- AI（LLM 等）を利用する場合、API 利用コストとデータ取り扱い方針を検討する。

## 8. トンマナ（Tone & Manner）確認項目
- 既存ブランドガイドラインの有無、共有可否。
- ビジュアル指針: 色味、フォント、レイアウト、使用禁止素材など。
- キャプションの文体: 敬語/カジュアル、ブランドボイス、禁止表現。
- ハッシュタグ・CTA のルール: 固定ハッシュタグ、可変枠の決め方、投稿目的ごとの違い。
- シーズン/キャンペーンごとの変化や例外対応の有無。

## 9. リスクと対策（初版）
- **API制限/障害**: Meta・Google API のレート制限や障害に備え、リトライや手動投稿に切り替え可能な運用手順を用意。
- **画像品質のばらつき**: 多様な元画像に対応できるよう複数テンプレや例外処理を検討。
- **認証情報の失効**: トークン更新の自動化、失敗時のアラート仕組みを構築。
- **完全自動化リスク**: 投稿前レビューを挟める設定を設け、誤投稿を防止。

## 10. 今後のタスク（例）
1. ヒアリングシート作成（日程調整、ステークホルダー情報、トンマナ詳細など）。
2. アーキテクチャ案の整理（シーケンス図、データフロー図）。
3. 技術検証（Drive トリガー、画像処理、Meta API 連携の PoC）。
4. 非機能要件の具体値・SLA 定義。
5. 運用/監視フローの設計とマニュアル草案作成。

---
※ 本ドキュメントは初版です。ヒアリング結果に応じて随時更新します。


